@page "/registro"
@using System.ComponentModel.DataAnnotations;
@using SubastaMaestra.Entities.Enums
@using SubastaMaestra.Models.DTOs.User;
@using SubastaMaestra.WebSite.Services

@inject IUserService userService ;

<div class="container">
    <div class="row">
        <!-- Imagen a la izquierda -->
        <div class="col-md-6 d-flex justify-content-center align-items-center">
            <div class="image-placeholder" style="width: 300px; height: 300px; background-color: lightgray; display: flex; justify-content: center; align-items: center;">
                <span>IMAGEN</span>
            </div>
        </div>

        <!-- Formulario de registro a la derecha -->
        <div class="col-md-6">
            <h2 class="text-center mb-4">Registrarse</h2>
            <EditForm Model="@userCreateDTO" OnValidSubmit="@Registrarse">
                <DataAnnotationsValidator />
                <ValidationSummary />

                <!-- Nombre -->
                <div class="form-group mb-3">
                    <InputText class="form-control" placeholder="Nombre" @bind-Value="userCreateDTO.Name" />
                </div>

                <!-- Correo electrónico -->
                <div class="form-group mb-3">
                    <InputText class="form-control" placeholder="Correo Electrónico" @bind-Value="userCreateDTO.Email" />
                </div>

                <!-- Contraseña -->
                <div class="form-group mb-3">
                    <InputText class="form-control" type="password" placeholder="Contraseña" @bind-Value="userCreateDTO.Password" />
                </div>

                <!-- Repetir contraseña -->
                <div class="form-group mb-3">
                    <InputText class="form-control" type="password" placeholder="Repetir Contraseña" @bind-Value="userCreateDTO.ConfirmPassword" />
                </div>

                <!-- Teléfono -->
                <div class="form-group mb-3">
                    <InputText class="form-control" placeholder="Teléfono" @bind-Value="userCreateDTO.PhoneNumber" />
                </div>

                <div class="form-group mb-3">
                    <InputSelect class="form-control" @bind-Value="userCreateDTO.DocumentType">
                        <option value="">Selecciona un tipo de documento</option>
                        @foreach (var documentType in Enum.GetValues(typeof(DocumType)))
                        {
                            <option value="@((int)documentType)">@documentType</option>
                        }
                    </InputSelect>
                </div>

                <div class="form-group mb-3">
                    <InputText class="form-control" placeholder="Número de Documento" @bind-Value="userCreateDTO.DocumentNumber" />
                </div>

                <!-- Persona (por ejemplo, tipo de usuario) -->
                <div class="form-group mb-3">
                    <InputSelect class="form-control" @bind-Value="userCreateDTO.PersonType">
                        <option value="">Tipo de persona</option>
                        @foreach (var personType in Enum.GetValues(typeof(PersonType)))
                        {
                            <option value="@((int)personType)">@personType</option>
                        }
                    </InputSelect>
                </div>

                <!-- Botón de registro -->
                <div class="form-group mb-3 text-center">
                    <button type="submit" class="btn btn-primary">Registrarse</button>
                </div>

                <!-- Enlace para iniciar sesión -->
                <div class="text-center">
                    <a href="/iniciar-sesion">¿Ya tienes cuenta? Inicia sesión</a>
                </div>
            </EditForm>
        </div>
    </div>
</div>
@code {
    private UserCreateDTO userCreateDTO = new UserCreateDTO();

    private async Task Registrarse()
    {
        var response = await userService.Register(userCreateDTO);

    }

}



